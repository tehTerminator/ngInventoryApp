<section class="card">
    <h2 class="card-header">
      {{ productName }}
    </h2>
    <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()" class="card-body">
      <div class="row">
        <div class="col-md-6">
          <mat-form-field class="d-block" appearance="outline">
            <mat-label>Quantity</mat-label>
            <input
              #quantityField
              type="number"
              name="quantity"
              matInput
              formControlName="quantity"
              required
            />
            <mat-error
              *ngIf="transactionForm.quantityFormControl.invalid && (transactionForm.quantityFormControl.touched || transactionForm.quantityFormControl.dirty)"
            >
              <span *ngIf="transactionForm.quantityFormControl.hasError('required')"
                >Please Provide Quantity.</span
              >
              <span *ngIf="transactionForm.quantityFormControl.hasError('min')"
                >Quantity Must Not Be Zero.</span
              >
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="d-block" appearance="outline">
            <mat-label>Rate</mat-label>
            <input type="number" name="rate" matInput formControlName="rate" required />
            <mat-error *ngIf="transactionForm.rateFormControl.invalid && (transactionForm.rateFormControl.touched || transactionForm.rateFormControl.dirty)">
              <span *ngIf="transactionForm.rateFormControl.hasError('required')">Please Provide Rate.</span>
              <span *ngIf="transactionForm.rateFormControl.hasError('min')">Rate Must Not Be Zero.</span>
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-12">
          <mat-form-field class="d-block" appearance="outline">
            <mat-label>Discount</mat-label>
            <input
              type="number"
              name="discount"
              matInput
              formControlName="discount"
            />
          </mat-form-field>
        </div>
      </div>
      
      <div class="p-1 flex-fill">
        <button
          type="submit"
          class="btn btn-primary w-100"
          [disabled]="transactionForm.invalid"
          (click)="onSubmit()"
        >
          Add More
        </button>
      </div>
  
    </form>
  </section>
  <section>
    
    <table class="table bg-light mt-3 text-center">
      <thead>
        <tr>
          <th *ngIf="transactionForm.netAmount < 5000">
            <span class="d-block">Gross Amount</span>
            <span class="d-block text-center">A</span>
          </th>
          <th *ngIf="transactionForm.netAmount < 5000">
            <span class="d-block">Total Discount</span>
            <span class="d-block text-center">B</span>
          </th>
          <th>
            <span class="d-block">Net Amount</span>
            <span class="d-block text-center">A - B</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="text-center">
          <td *ngIf="transactionForm.netAmount < 5000">
            <span class="d-block">
              {{ transactionForm.grossAmount | currency: 'INR' }}
            </span>
            <span class="d-block">
              {{ transactionForm.quantity }} &#64; {{ transactionForm.rate }}
            </span>
          </td>
          <td *ngIf="transactionForm.netAmount < 5000">
            <span class="d-block">{{ transactionForm.discount | currency: 'INR'}}</span>
            <span class="d-block">{{ transactionForm.discountPercentage | number:'1.2-2' }} %</span>
          </td>
          <td class="fw-bold fs-1 align-middle">
            {{ transactionForm.netAmount | currency: 'INR' }}
          </td>
        </tr>
      </tbody>
    </table>
  </section>